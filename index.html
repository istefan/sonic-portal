
<!DOCTYPE html>
<html lang="en" data-bs-theme="auto">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>SONIC DPS</title>

    <script src="js/color-modes.js"></script>


    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.7.1/nouislider.min.css" />
    <link href="css/style.css" rel="stylesheet">
    
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png" sizes="180x180">
    <link rel="icon" href="images/favicon-32x32.png" sizes="32x32" type="image/png">
    <link rel="icon" href="images/favicon-16x16.png" sizes="16x16" type="image/png">
    <link rel="mask-icon" href="images/safari-pinned-tab.svg" color="#712cf9">
    <link rel="icon" href="images/favicon.ico">

    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#712cf9">
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof bootstrap === 'undefined') {
                console.error('Bootstrap JS is required but not loaded');
            }
        });
    </script>
</head>
<body>
    <header class="navbar sticky-top bg-white flex-md-nowrap p-1" data-bs-theme="light">
        <a class="navbar-brand me-0 px-3 fs-6" href="index.html">
            <img src="images/logo.svg" alt="Vuestic Admin Logo" height="24">
            <span class="ms-2 brand-text">SONIC DPS</span>
        </a>
        <ul class="navbar-nav flex-row ms-auto"> <!-- Added ms-auto to push to right -->
            <li class="nav-item dropdown user-dropdown">
                <a class="nav-link px-3 dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" title="Account preferences">
                    <i class="bi bi-person" aria-hidden="true"></i>
                </a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                    <li><a class="dropdown-item" href="page/contul-meu/index.html">Editare profil</a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item" href="login.html">Ieșire din cont</a></li>
                </ul>
            </li>
        </ul>
        <ul class="navbar-nav flex-row d-md-none">
            <li class="nav-item text-nowrap">
                <button class="nav-link px-3 text-dark" type="button" data-bs-toggle="offcanvas" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
                    <i class="bi bi-list" aria-hidden="true"></i>
                </button>
            </li>
        </ul>
    </header>

    <div class="container-fluid">
        <div class="row"><div class="sidebar p-0 bg-white">
    <div class="offcanvas-md offcanvas-end bg-white" tabindex="-1" id="sidebarMenu" aria-labelledby="sidebarMenuLabel">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="sidebarMenuLabel">SONIC DPS</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#sidebarMenu" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body d-md-flex flex-column p-0 pt-lg-3 overflow-y-auto">
            
            <ul class="nav flex-column">
                <li class="nav-item">
                    <a class="nav-link d-flex align-items-center gap-2 active" aria-current="page" href="index.html">
                        <i class="bi bi-display" aria-hidden="true"></i> Panoul Meu
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link d-flex align-items-center gap-2 " href="page/adrese/index.html">
                        <i class="bi bi-geo-alt" aria-hidden="true"></i> Adresele Mele
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link d-flex align-items-center gap-2 " href="page/regiuni/index.html">
                        <i class="bi bi-bounding-box" aria-hidden="true"></i> Regiuni / Zone
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link d-flex align-items-center gap-2 " href="page/perioade-calcul/index.html">
                        <i class="bi bi-calendar-check" aria-hidden="true"></i> Perioade Citiri
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link d-flex align-items-center gap-2 " href="page/setari-alerte/index.html">
                        <i class="bi bi-bell" aria-hidden="true"></i> Setări Alerte
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link d-flex align-items-center gap-2 " href="page/info-center/index.html">
                        <i class="bi bi-info-circle" aria-hidden="true"></i> Info Center
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link d-flex align-items-center gap-2 " href="page/contact/index.html">
                        <i class="bi bi-envelope" aria-hidden="true"></i> Contact
                    </a>
                </li>
            </ul>

            <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-body-secondary text-uppercase">
                <span>Rapoarte</span>
            </h6>
            <ul class="nav flex-column mb-auto">
                <li class="nav-item">
                    <a class="nav-link d-flex align-items-center gap-2 " href="page/citiri/index.html">
                        <i class="bi bi-calendar-day" aria-hidden="true"></i> Raport Citiri
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link d-flex align-items-center gap-2 " href="page/bilant/index.html">
                        <i class="bi bi-pie-chart" aria-hidden="true"></i> Bilanț Neînchideri Apă
                    </a>
                </li>
                 <li class="nav-item">
                    <a class="nav-link d-flex align-items-center gap-2 " href="page/estimari/index.html">
                        <i class="bi bi-graph-up-arrow" aria-hidden="true"></i> Estimări Consum
                    </a>
                </li>
                 <!-- MODIFICARE: Link nou adaugat -->
                <li class="nav-item">
                    <a class="nav-link d-flex align-items-center gap-2 " href="page/alerte/index.html">
                        <i class="bi bi-exclamation-triangle" aria-hidden="true"></i> Raport Alerte
                    </a>
                </li>
            </ul>

            <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-body-secondary text-uppercase">
                <span>Administrare</span>
            </h6>
            <ul class="nav flex-column mb-auto">
                <li class="nav-item">
                    <a class="nav-link d-flex align-items-center gap-2 " href="page/contul-meu/index.html">
                        <i class="bi bi-person-gear" aria-hidden="true"></i> Contul Meu
                    </a>
                </li>
            </ul>

            <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-body-secondary text-uppercase">
                <span>Admin Sistem</span>
            </h6>
            <ul class="nav flex-column mb-auto">
                <li class="nav-item">
                    <a class="nav-link d-flex align-items-center gap-2 " href="page/users/index.html">
                        <i class="bi bi-people" aria-hidden="true"></i> Utilizatori
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link d-flex align-items-center gap-2 " href="page/settings/index.html">
                        <i class="bi bi-receipt" aria-hidden="true"></i> Setari Aplicatie
                    </a>
                </li>
            </ul>
        </div>
    </div>
</div>

<main class="main px-md-4">
    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3">
        <h1>Bună, Ștefan Iftimie</h1>
    </div>

    <!-- Sectiunea Hero ramane neschimbata -->
    <section id="smartMeteringHero">
        <canvas id="networkCanvas"></canvas>
        <div class="container-fluid h-100">
            <div class="row h-100 align-items-center">
                <div class="col-lg-6 col-md-8">
                    <div class="hero-text">
                        <h1 class="hero-title">Bun venit în viitorul contorizării</h1>
                        <p class="hero-subtitle">
                            Monitorizare inteligentă în timp real a consumului de apă. Date precise, alerte instantanee și eficiență maximă, direct în panoul dumneavoastră.
                        </p>
                        <a href="" class="btn btn-outline-light btn-lg mt-3">Vezi Consumul</a>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Cardurile de sumar raman neschimbate -->
    <div class="row">
        <div class="col-md-3 mb-4">
            <div class="card">
                <div class="card-body">
                    <h3 class="card-title">2</h3>
                    <p class="card-text">Locuri de măsurare (branșamente)</p>
                    <a href="" class="fp-link">Mergeți la locuri de măsurare &rarr;</a>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-4">
            <div class="card">
                <div class="card-body">
                    <h3 class="card-title">84</h3>
                    <p class="card-text">Locuri de consum (apartamente)</p>
                    <a href="" class="fp-link">Mergeți la locuri de consum &rarr;</a>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-4">
            <div class="card">
                <div class="card-body">
                    <h3 class="card-title">264</h3>
                    <p class="card-text">Echipamente de măsură</p>
                    <a href="" class="fp-link">Vizualizați Citiri &rarr;</a>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-4">
            <div class="card">
                <div class="card-body">
                    <h3 class="card-title">7</h3> 
                    <p class="card-text">Alerte active</p>
                    <a href="" class="fp-link">Mergeți la alerte &rarr;</a>
                </div>
            </div>
        </div>
    </div>

    <h2 class="mb-4">Informații Portal</h2>
    
    <div class="mb-5">
        <div class="row">
            <!-- NOU: Continutul cardului de informatii a fost actualizat -->
            <div class="col-md-9 mb-4">
                <div class="card">
                    <div class="card-body d-flex flex-column">
                        <h5>Locuri de măsurare și consum</h5>
                        <p class="mb-3">Acesta este un portal dedicat clienților Decor Press care au montate contoare inteligente cu ultrasunete Q-SONIC. Portalul afișează informațiile locurilor de măsurare sau de consum setate ca fiind active de către utilizator.</p>
                        <p class="mb-3">Un <strong>loc de măsurare</strong> poate fi un branșament (imobil) în care se află mai multe locuri de consum. Un <strong>loc de consum</strong> poate fi un apartament sau spațiu cu altă destinație (ex: spațiu comercial) care poate avea unul sau mai multe echipamente de măsură instalate. Un utilizator poate gestiona unul sau mai multe locuri, în baza codurilor unice aferente.</p>

                        <h5>Alerte</h5>
                        <p class="mb-3">Există două tipuri de alerte: <strong>alerte critice</strong> (ex: țeavă spartă, pericol de îngheț) și <strong>alerte non-critice</strong> (ex: curgere continuă, curgere inversă, consum zero). Portalul permite setarea numărului de telefon pentru a primi alerte prin SMS la cele critice și pe Email la cele non-critice.</p>
                        <p class="mb-0">Pentru mai multe detalii despre utilizarea portalului, puteți accesa <a href="">secțiunea Info Center</a>.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                
                <!-- NOU: Cardul pentru Locul de Măsurare a fost actualizat -->
                <div class="card mb-4">
                    <div class="card-body">
                        <h6 class="card-subtitle mb-2 text-body-secondary">LOC DE MĂSURARE ACTIV</h6>
                        <h5 class="card-title mb-2"><i class="bi bi-building-fill me-2"></i> Str. Nițu Vasile, nr. 57, Bucuresti, Sector 4</h5>
                        <p class="card-text mb-1">Cod: 36FC403C</p>
                        <a href="" class="btn btn-outline-secondary btn-sm w-100 mt-3">Modifică locația activă</a>
                    </div>
                </div>
                
                <!-- NOU: Cardul pentru Locul de Consum a fost actualizat -->
                <div class="card mb-4">
                    <div class="card-body">
                        <h6 class="card-subtitle mb-2 text-body-secondary">LOC DE CONSUM ACTIV</h6>
                        <h5 class="card-title mb-2"><i class="bi bi-house-door-fill me-2"></i> Str. Nițu Vasile, nr. 57, Bucuresti, Sector 4 - Decor Press</h5>
                        <p class="card-text mb-1">Cod: 7R5PXY1Z</p>
                        <a href="" class="btn btn-outline-secondary btn-sm w-100 mt-3">Modifică locația activă</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

</main>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const canvas = document.getElementById('networkCanvas');
    if (canvas) {
        const ctx = canvas.getContext('2d');
        let particlesArray;

        function resizeCanvas() {
            canvas.width = canvas.parentElement.offsetWidth;
            canvas.height = canvas.parentElement.offsetHeight;
        }

        const mouse = {
            x: undefined,
            y: undefined,
            radius: (canvas.height / 90) * (canvas.width / 90) // Raza de interacțiune
        };

        window.addEventListener('mousemove', function(event) {
            const rect = canvas.getBoundingClientRect();
            mouse.x = event.clientX - rect.left;
            mouse.y = event.clientY - rect.top;
        });
        
        canvas.addEventListener('mouseout', function() {
            mouse.x = undefined;
            mouse.y = undefined;
        });

        class Particle {
            constructor(x, y, directionX, directionY, size) {
                this.x = x;
                this.y = y;
                this.directionX = directionX;
                this.directionY = directionY;
                this.size = size;
                this.color = 'rgba(70, 170, 255, 0.8)';

                // NOU: Proprietăți pentru efectul de puls (antena radio)
                this.isPulsing = false;
                this.pulseRadius = 0;
                this.pulseOpacity = 0;
                this.pulseSpeed = 0.3;
                this.maxPulseRadius = 25;
            }

            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2, false);
                ctx.fillStyle = this.color;
                ctx.fill();

                // NOU: Desenăm pulsul dacă este activ
                if (this.isPulsing) {
                    ctx.beginPath();
                    ctx.strokeStyle = `rgba(0, 191, 255, ${this.pulseOpacity})`;
                    ctx.lineWidth = 2;
                    ctx.arc(this.x, this.y, this.pulseRadius, 0, Math.PI * 2);
                    ctx.stroke();
                }
            }

            update() {
                if (this.x > canvas.width || this.x < 0) this.directionX = -this.directionX;
                if (this.y > canvas.height || this.y < 0) this.directionY = -this.directionY;
                
                this.x += this.directionX;
                this.y += this.directionY;

                // NOU: Logica pentru animația pulsului
                if (this.isPulsing) {
                    this.pulseRadius += this.pulseSpeed;
                    this.pulseOpacity = 1 - (this.pulseRadius / this.maxPulseRadius);
                    if (this.pulseOpacity <= 0) {
                        this.isPulsing = false;
                        this.pulseRadius = 0;
                    }
                } else {
                    // O șansă mică la fiecare cadru de a începe un puls
                    if (Math.random() < 0.0005) {
                        this.isPulsing = true;
                    }
                }

                this.draw();
            }
        }

        function init() {
            particlesArray = [];
            let numberOfParticles = (canvas.width * canvas.height) / 9000;
            for (let i = 0; i < numberOfParticles; i++) {
                let size = (Math.random() * 1.5) + 1;
                let x = Math.random() * canvas.width;
                let y = Math.random() * canvas.height;
                let directionX = (Math.random() * 0.4) - 0.2;
                let directionY = (Math.random() * 0.4) - 0.2;
                particlesArray.push(new Particle(x, y, directionX, directionY, size));
            }
        }

        function connect() {
            for (let a = 0; a < particlesArray.length; a++) {
                // MODIFICAT: Conectare la cursorul mouse-ului
                if (mouse.x !== undefined) {
                    let dxMouse = mouse.x - particlesArray[a].x;
                    let dyMouse = mouse.y - particlesArray[a].y;
                    let distanceMouse = Math.sqrt(dxMouse * dxMouse + dyMouse * dyMouse);
                    if (distanceMouse < mouse.radius) {
                        ctx.strokeStyle = `rgba(0, 191, 255, ${1 - distanceMouse/mouse.radius})`;
                        ctx.lineWidth = 0.5;
                        ctx.beginPath();
                        ctx.moveTo(particlesArray[a].x, particlesArray[a].y);
                        ctx.lineTo(mouse.x, mouse.y);
                        ctx.stroke();
                    }
                }

                // Conectare între particule
                for (let b = a; b < particlesArray.length; b++) {
                    let dx = particlesArray[a].x - particlesArray[b].x;
                    let dy = particlesArray[a].y - particlesArray[b].y;
                    let distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance < 120) { // Distanța maximă de conectare între particule
                        ctx.strokeStyle = `rgba(0, 150, 255, ${1 - distance/120})`;
                        ctx.lineWidth = 0.3;
                        ctx.beginPath();
                        ctx.moveTo(particlesArray[a].x, particlesArray[a].y);
                        ctx.lineTo(particlesArray[b].x, particlesArray[b].y);
                        ctx.stroke();
                    }
                }
            }
        }
        
        function animate() {
            requestAnimationFrame(animate);
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            for (let i = 0; i < particlesArray.length; i++) {
                particlesArray[i].update();
            }
            connect();
        }
        
        window.addEventListener('resize', function() {
            resizeCanvas();
            mouse.radius = (canvas.height / 90) * (canvas.width / 90);
            init();
        });

        resizeCanvas();
        init();
        animate();
    }
});
</script>

        </div>
    </div>

    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.3.2/dist/chart.umd.js" integrity="sha384-eI7PSr3L1XLISH8JdDII5YN/njoSsxfbrkCTnJrzXt+ENP5MOVBxD+l6sEG4zoLp" crossorigin="anonymous" class="astro-vvvwv3sm"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.7.1/nouislider.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/wnumb/1.2.0/wNumb.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://npmcdn.com/flatpickr/dist/l10n/ro.js"></script>
    <script src="js/dashboard.js" class="astro-vvvwv3sm"></script>
</body>
</html>